{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { db, auth } from \"../firebase/config\";\nimport firebase from 'firebase';\nimport \"firebase/firestore\";\n\nvar Fotos = function (_Component) {\n  _inherits(Fotos, _Component);\n\n  var _super = _createSuper(Fotos);\n\n  function Fotos(props) {\n    var _this;\n\n    _classCallCheck(this, Fotos);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      likeado: false\n    };\n    return _this;\n  }\n\n  _createClass(Fotos, [{\n    key: \"like\",\n    value: function like(id) {\n      var _this2 = this;\n\n      if (this.state.likeado == false) {\n        var agregarLike = db.collection(\"posts\").doc(\"\" + item.id);\n        return agregarLike.update({\n          likes: firebase.firestore.FieldValue.arrayUnion(\"\" + auth.currentUser.email)\n        }).then(function () {\n          _this2.setState({\n            liked: true\n          });\n        }).catch(function (error) {\n          console.error(\"Error updating document: \", error);\n        });\n      } else {\n        var quitarLike = db.collection(\"posteos\").doc(\"\" + item.id);\n        return quitarLike.update({\n          likes: firebase.firestore.FieldValue.arrayRemove(\"\" + auth.currentUser.email)\n        }).then(function () {\n          _this2.setState({\n            liked: false\n          });\n        }).catch(function (error) {\n          console.error(\"Error updating document: \", error);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      console.log(this.props.data.item.data);\n      var data = this.props.data.item.data;\n      return React.createElement(View, {\n        style: styles.container\n      }, React.createElement(Text, null, \"usuario: \", data.user), React.createElement(Text, null, \"titulo: \", data.title), React.createElement(Text, null, \"contenido: \", data.description), React.createElement(Text, null, \"likes:\", data.likes.length), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this3.like(_this3.props.data.item.id);\n        }\n      }, React.createElement(Text, null, \"Likear\")));\n    }\n  }]);\n\n  return Fotos;\n}(Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\nexport default Fotos;","map":{"version":3,"sources":["/Users/franciscorendo/Desktop/reactnative/finalKochRendo/src/components/paginafotos.js"],"names":["React","Component","db","auth","firebase","Fotos","props","state","likeado","id","agregarLike","collection","doc","item","update","likes","firestore","FieldValue","arrayUnion","currentUser","email","then","setState","liked","catch","error","console","quitarLike","arrayRemove","log","data","styles","container","user","title","description","length","like","StyleSheet","create","flex","backgroundColor","alignItems","justifyContent"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport { StyleSheet, Text, View, TouchableOpacity } from 'react-native';\nimport { db, auth } from '../firebase/config';\nimport firebase from 'firebase';\nimport \"firebase/firestore\"\n\n\nclass Fotos extends Component{\n    constructor(props){\n      super(props)\n      this.state={\n      likeado: false\n      }\n    }\n\nlike(id){\n    if (this.state.likeado == false) {\n        var agregarLike = db.collection(\"posts\").doc(`${item.id}`);\n\n        return agregarLike.update({\n            likes : firebase.firestore.FieldValue.arrayUnion(`${auth.currentUser.email}`)\n        })\n        .then(() => {\n            this.setState({\n            /*  likes: this.state.likes+=1, */\n                liked: true\n            })\n        })\n        .catch((error) => {\n            console.error(\"Error updating document: \", error);\n        }); \n                  \n    }\n    else{\n        var quitarLike = db.collection(\"posteos\").doc(`${item.id}`);\n\n        return quitarLike.update({\n            likes : firebase.firestore.FieldValue.arrayRemove(`${auth.currentUser.email}`)\n        })\n        .then(() => {\n            this.setState({\n            /*  likes: this.state.likes-=1, */\n                liked: false\n            })\n        })\n        .catch((error) =>{\n            console.error(\"Error updating document: \", error);\n        }); \n\n    }\n}\n\n\n\n\n\n    render(){\n        console.log(this.props.data.item.data)\n        let {data} = this.props.data.item\n  return (\n    <View style={styles.container}>\n      \n      <Text>usuario: {data.user}</Text>\n      <Text>titulo: {data.title}</Text>\n      <Text>contenido: {data.description}</Text>\n      <Text>likes:{data.likes.length}</Text>\n      <TouchableOpacity onPress={()=>this.like(this.props.data.item.id)}>\n                    <Text>Likear</Text>\n\n                </TouchableOpacity>\n\n\n      \n\n      \n    </View>\n  );\n    }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});\n\nexport default Fotos\n"]},"metadata":{},"sourceType":"module"}