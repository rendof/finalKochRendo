{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/federicokoch/Documents/TpFinalProg3/finalKochRendo/src/components/paginafotos.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { db, auth } from \"../firebase/config\";\nimport firebase from 'firebase';\nimport \"firebase/firestore\";\n\nvar Fotos = function (_Component) {\n  _inherits(Fotos, _Component);\n\n  var _super = _createSuper(Fotos);\n\n  function Fotos(props) {\n    var _this;\n\n    _classCallCheck(this, Fotos);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      likeado: false,\n      comentario: \"\",\n      modal: false,\n      textomodal: \"Ver comentarios\"\n    };\n    return _this;\n  }\n\n  _createClass(Fotos, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.data.item.data.likes.includes(auth.currentUser.email)) {\n        this.setState({\n          likeado: true\n        });\n      }\n    }\n  }, {\n    key: \"like\",\n    value: function like(id) {\n      var _this2 = this;\n\n      if (this.state.likeado == false) {\n        var agregarLike = db.collection(\"posts\").doc(id);\n        return agregarLike.update({\n          likes: firebase.firestore.FieldValue.arrayUnion(auth.currentUser.email)\n        }).then(function () {\n          _this2.setState({\n            likeado: true\n          });\n        }).catch(function (error) {\n          console.error(\"Error updating document: \", error);\n        });\n      } else {\n        var quitarLike = db.collection(\"posts\").doc(id);\n        return quitarLike.update({\n          likes: firebase.firestore.FieldValue.arrayRemove(auth.currentUser.email)\n        }).then(function () {\n          _this2.setState({\n            likeado: false\n          });\n        }).catch(function (error) {\n          console.error(\"Error updating document: \", error);\n        });\n      }\n    }\n  }, {\n    key: \"comentario\",\n    value: function comentario() {\n      var comentario = {\n        texto: this.state.comentario,\n        usuario: auth.currentUser.email,\n        fechaDeCreacion: Date.now()\n      };\n      var agregarComentario = db.collection(\"posts\").doc(\"\" + this.props.data.item.id);\n      return agregarComentario.update({\n        comments: firebase.firestore.FieldValue.arrayUnion(comentario)\n      }).then(function () {\n        console.log(\"comentario exitoso\");\n      }).catch(function (error) {\n        console.error(\"Error updating document: \", error);\n      });\n    }\n  }, {\n    key: \"modal\",\n    value: function modal() {\n      if (this.state.modal) {\n        this.setState({\n          modal: false,\n          textomodal: \"Ver Comentarios\"\n        });\n      } else {\n        this.setState({\n          modal: true,\n          textomodal: \"Ocultar Comentarios\"\n        });\n      }\n    }\n  }, {\n    key: \"borrarPosteo\",\n    value: function borrarPosteo() {\n      var _this3 = this;\n\n      db.collection('posts').doc(this.props.data.item.id).delete().then(function () {\n        console.log(_this3.props.data.item.id);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      console.log(this.props.data.item.data);\n      var data = this.props.data.item.data;\n      return React.createElement(View, {\n        style: styles.contenedor,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 5\n        }\n      }, React.createElement(Text, {\n        style: {\n          paddingBottom: 10,\n          fontSize: 20,\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 7\n        }\n      }, data.user), React.createElement(Image, {\n        source: {\n          uri: data.image\n        },\n        style: {\n          height: 200,\n          width: 200\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 7\n        }\n      }), React.createElement(Text, {\n        style: styles.dataposteo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 7\n        }\n      }, \"Titulo: \", data.title), React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 7\n        }\n      }, \"Contenido: \", data.description), React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 7\n        }\n      }, \"likes:\", data.likes.length), React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 7\n        }\n      }, \"Comentarios:\", data.comments.length), React.createElement(TouchableOpacity, {\n        style: styles.likeador,\n        onPress: function onPress() {\n          return _this4.like(_this4.props.data.item.id);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 7\n        }\n      }, this.state.likeado ? React.createElement(Text, {\n        style: {\n          color: 'white',\n          fontWeight: 'bold',\n          textAlign: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 31\n        }\n      }, \"Dislike\") : React.createElement(Text, {\n        style: {\n          color: 'white',\n          fontWeight: 'bold',\n          textAlign: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 113\n        }\n      }, \"Like\")), React.createElement(TouchableOpacity, {\n        style: styles.touchable,\n        onPress: function onPress() {\n          return _this4.modal();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: styles.texto,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }\n      }, this.state.textomodal)), this.props.borrarPosteo ? React.createElement(TouchableOpacity, {\n        style: styles.likeador,\n        onPress: function onPress() {\n          return _this4.borrarPosteo();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: styles.texto,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }\n      }, \" Delete Post\")) : null, this.state.modal ? React.createElement(Modal, {\n        style: styles.modalgede,\n        visible: this.state.modal,\n        animationType: \"fade\",\n        transparent: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 17\n        }\n      }, data.comments.length == 0 ? React.createElement(Text, {\n        style: styles.dataposteo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 48\n        }\n      }, \"\\\"no hay comentarios, haz uno!\\\"\") : React.createElement(FlatList, {\n        data: data.comments,\n        keyExtractor: function keyExtractor(data) {\n          return data.fechaDeCreacion.toString();\n        },\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          return React.createElement(Text, {\n            style: styles.dataposteo,\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 48\n            }\n          }, \" \", item.usuario, \" escribio: \", item.texto, \" \");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 25\n        }\n      }), React.createElement(TextInput, {\n        style: styles.ingresoTexto,\n        keyboardType: \"default\",\n        placeholder: \"Escriba un comentario\",\n        onChangeText: function onChangeText(text) {\n          return _this4.setState({\n            comentario: text\n          });\n        },\n        value: this.state.comentario,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }\n      }), React.createElement(TouchableOpacity, {\n        style: styles.touchable,\n        onPress: function onPress() {\n          return _this4.comentario();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.texto,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 17\n        }\n      }, \"Comentar\"))) : React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 17\n        }\n      }));\n    }\n  }]);\n\n  return Fotos;\n}(Component);\n\nvar styles = StyleSheet.create({\n  contenedor: {\n    display: 'flex',\n    alignItems: 'center',\n    borderColor: '#d8d8d8',\n    borderRadius: 5,\n    borderWidth: 2,\n    margin: 10,\n    padding: 15,\n    shadowRadius: 10\n  },\n  dataposteo: {\n    padding: 3,\n    fontSize: 13\n  },\n  likeador: {\n    paddingVertical: 5,\n    width: '25%',\n    backgroundColor: 'rgb(58, 58, 211)',\n    borderRadius: 15,\n    margin: 10\n  },\n  modalgede: {\n    borderColor: 'rgb(58, 58, 211)',\n    alignSelf: 'center',\n    alignItems: 'center',\n    padding: 10\n  },\n  ingresoTexto: {\n    color: 'lightGray',\n    borderRadius: 15\n  }\n});\nexport default Fotos;","map":{"version":3,"sources":["/Users/federicokoch/Documents/TpFinalProg3/finalKochRendo/src/components/paginafotos.js"],"names":["React","Component","db","auth","firebase","Fotos","props","state","likeado","comentario","modal","textomodal","data","item","likes","includes","currentUser","email","setState","id","agregarLike","collection","doc","update","firestore","FieldValue","arrayUnion","then","catch","error","console","quitarLike","arrayRemove","texto","usuario","fechaDeCreacion","Date","now","agregarComentario","comments","log","delete","styles","contenedor","paddingBottom","fontSize","fontWeight","user","uri","image","height","width","dataposteo","title","description","length","likeador","like","color","textAlign","touchable","borrarPosteo","modalgede","toString","ingresoTexto","text","StyleSheet","create","display","alignItems","borderColor","borderRadius","borderWidth","margin","padding","shadowRadius","paddingVertical","backgroundColor","alignSelf"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA8B,OAA9B;;;;;;;;;AAEA,SAASC,EAAT,EAAaC,IAAb;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAO,oBAAP;;IAGMC,K;;;;;AACF,iBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AAChB,8BAAMA,KAAN;AACA,UAAKC,KAAL,GAAW;AACXC,MAAAA,OAAO,EAAE,KADE;AAEXC,MAAAA,UAAU,EAAE,EAFD;AAGXC,MAAAA,KAAK,EAAE,KAHI;AAIXC,MAAAA,UAAU,EAAE;AAJD,KAAX;AAFgB;AAQjB;;;;WACD,6BAAmB;AACf,UAAI,KAAKL,KAAL,CAAWM,IAAX,CAAgBC,IAAhB,CAAqBD,IAArB,CAA0BE,KAA1B,CAAgCC,QAAhC,CAAyCZ,IAAI,CAACa,WAAL,CAAiBC,KAA1D,CAAJ,EAAsE;AAClE,aAAKC,QAAL,CAAc;AACVV,UAAAA,OAAO,EAAC;AADE,SAAd;AAIH;AAEH;;;WAEN,cAAKW,EAAL,EAAQ;AAAA;;AACJ,UAAI,KAAKZ,KAAL,CAAWC,OAAX,IAAsB,KAA1B,EAAiC;AAC7B,YAAIY,WAAW,GAAGlB,EAAE,CAACmB,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BH,EAA3B,CAAlB;AAIA,eAAOC,WAAW,CAACG,MAAZ,CAAmB;AACtBT,UAAAA,KAAK,EAAGV,QAAQ,CAACoB,SAAT,CAAmBC,UAAnB,CAA8BC,UAA9B,CAAyCvB,IAAI,CAACa,WAAL,CAAiBC,KAA1D;AADc,SAAnB,EAQNU,IARM,CAQD,YAAM;AACR,UAAA,MAAI,CAACT,QAAL,CAAc;AAEVV,YAAAA,OAAO,EAAE;AAFC,WAAd;AAIH,SAbM,EAcNoB,KAdM,CAcA,UAACC,KAAD,EAAW;AACdC,UAAAA,OAAO,CAACD,KAAR,CAAc,2BAAd,EAA2CA,KAA3C;AACH,SAhBM,CAAP;AAkBH,OAvBD,MAwBI;AACA,YAAIE,UAAU,GAAG7B,EAAE,CAACmB,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BH,EAA3B,CAAjB;AAEA,eAAOY,UAAU,CAACR,MAAX,CAAkB;AACrBT,UAAAA,KAAK,EAAGV,QAAQ,CAACoB,SAAT,CAAmBC,UAAnB,CAA8BO,WAA9B,CAA0C7B,IAAI,CAACa,WAAL,CAAiBC,KAA3D;AADa,SAAlB,EAINU,IAJM,CAID,YAAM;AACR,UAAA,MAAI,CAACT,QAAL,CAAc;AAEVV,YAAAA,OAAO,EAAE;AAFC,WAAd;AAIH,SATM,EAUNoB,KAVM,CAUA,UAACC,KAAD,EAAU;AACbC,UAAAA,OAAO,CAACD,KAAR,CAAc,2BAAd,EAA2CA,KAA3C;AACH,SAZM,CAAP;AAcH;AACJ;;;WAED,sBAAY;AACR,UAAIpB,UAAU,GAAE;AAACwB,QAAAA,KAAK,EAAE,KAAK1B,KAAL,CAAWE,UAAnB;AACQyB,QAAAA,OAAO,EAAE/B,IAAI,CAACa,WAAL,CAAiBC,KADlC;AAEQkB,QAAAA,eAAe,EAAEC,IAAI,CAACC,GAAL;AAFzB,OAAhB;AAGA,UAAIC,iBAAiB,GAAGpC,EAAE,CAACmB,UAAH,CAAc,OAAd,EAAuBC,GAAvB,MAA8B,KAAKhB,KAAL,CAAWM,IAAX,CAAgBC,IAAhB,CAAqBM,EAAnD,CAAxB;AAEA,aAAOmB,iBAAiB,CAACf,MAAlB,CAAyB;AAC5BgB,QAAAA,QAAQ,EAAGnC,QAAQ,CAACoB,SAAT,CAAmBC,UAAnB,CAA8BC,UAA9B,CAAyCjB,UAAzC;AADiB,OAAzB,EAGNkB,IAHM,CAGD,YAAM;AACRG,QAAAA,OAAO,CAACU,GAAR,CAAY,oBAAZ;AACH,OALM,EAMNZ,KANM,CAMA,UAACC,KAAD,EAAW;AACdC,QAAAA,OAAO,CAACD,KAAR,CAAc,2BAAd,EAA2CA,KAA3C;AACH,OARM,CAAP;AAUH;;;WAED,iBAAO;AACH,UAAI,KAAKtB,KAAL,CAAWG,KAAf,EAAsB;AAClB,aAAKQ,QAAL,CAAc;AACVR,UAAAA,KAAK,EAAE,KADG;AAEVC,UAAAA,UAAU,EAAE;AAFF,SAAd;AAIH,OALD,MAMI;AACA,aAAKO,QAAL,CAAc;AACVR,UAAAA,KAAK,EAAE,IADG;AAEVC,UAAAA,UAAU,EAAE;AAFF,SAAd;AAIH;AACJ;;;WAED,wBAAc;AAAA;;AAEVT,MAAAA,EAAE,CAACmB,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2B,KAAKhB,KAAL,CAAWM,IAAX,CAAgBC,IAAhB,CAAqBM,EAAhD,EAAoDsB,MAApD,GACCd,IADD,CACM,YAAI;AACRG,QAAAA,OAAO,CAACU,GAAR,CAAY,MAAI,CAAClC,KAAL,CAAWM,IAAX,CAAgBC,IAAhB,CAAqBM,EAAjC;AACD,OAHD;AAID;;;WAGC,kBAAQ;AAAA;;AACJW,MAAAA,OAAO,CAACU,GAAR,CAAY,KAAKlC,KAAL,CAAWM,IAAX,CAAgBC,IAAhB,CAAqBD,IAAjC;AACA,UAAKA,IAAL,GAAa,KAAKN,KAAL,CAAWM,IAAX,CAAgBC,IAA7B,CAAKD,IAAL;AACN,aACE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE8B,MAAM,CAACC,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAI;AAACC,UAAAA,aAAa,EAAC,EAAf;AAAkBC,UAAAA,QAAQ,EAAC,EAA3B;AAA8BC,UAAAA,UAAU,EAAC;AAAzC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAkElC,IAAI,CAACmC,IAAvE,CAFF,EAGE,oBAAC,KAAD;AAAO,QAAA,MAAM,EAAE;AAACC,UAAAA,GAAG,EAACpC,IAAI,CAACqC;AAAV,SAAf;AAAiC,QAAA,KAAK,EAAE;AAACC,UAAAA,MAAM,EAAC,GAAR;AAAaC,UAAAA,KAAK,EAAC;AAAnB,SAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,EAIE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAIT,MAAM,CAACU,UAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAA2CxC,IAAI,CAACyC,KAAhD,CAJF,EAKE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAkBzC,IAAI,CAAC0C,WAAvB,CALF,EAME,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAa1C,IAAI,CAACE,KAAL,CAAWyC,MAAxB,CANF,EAOE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAmB3C,IAAI,CAAC2B,QAAL,CAAcgB,MAAjC,CAPF,EASE,oBAAC,gBAAD;AAAkB,QAAA,KAAK,EAAIb,MAAM,CAACc,QAAlC;AAA4C,QAAA,OAAO,EAAE;AAAA,iBAAI,MAAI,CAACC,IAAL,CAAU,MAAI,CAACnD,KAAL,CAAWM,IAAX,CAAgBC,IAAhB,CAAqBM,EAA/B,CAAJ;AAAA,SAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEK,KAAKZ,KAAL,CAAWC,OAAX,GAAmB,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACkD,UAAAA,KAAK,EAAC,OAAP;AAAeZ,UAAAA,UAAU,EAAC,MAA1B;AAAiCa,UAAAA,SAAS,EAAC;AAA3C,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAnB,GAAqG,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACD,UAAAA,KAAK,EAAC,OAAP;AAAeZ,UAAAA,UAAU,EAAC,MAA1B;AAAiCa,UAAAA,SAAS,EAAC;AAA3C,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAF1G,CATF,EAkBQ,oBAAC,gBAAD;AAAkB,QAAA,KAAK,EAAEjB,MAAM,CAACkB,SAAhC;AAA2C,QAAA,OAAO,EAAE;AAAA,iBAAK,MAAI,CAAClD,KAAL,EAAL;AAAA,SAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEgC,MAAM,CAACT,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4B,KAAK1B,KAAL,CAAWI,UAAvC,CADJ,CAlBR,EAsBS,KAAKL,KAAL,CAAWuD,YAAX,GAED,oBAAC,gBAAD;AAAkB,QAAA,KAAK,EAAEnB,MAAM,CAACc,QAAhC;AAA0C,QAAA,OAAO,EAAE;AAAA,iBAAK,MAAI,CAACK,YAAL,EAAL;AAAA,SAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEnB,MAAM,CAACT,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADA,CAFC,GAME,IA5BX,EAiCU,KAAK1B,KAAL,CAAWG,KAAX,GACE,oBAAC,KAAD;AAAO,QAAA,KAAK,EAAIgC,MAAM,CAACoB,SAAvB;AAAiC,QAAA,OAAO,EAAE,KAAKvD,KAAL,CAAWG,KAArD;AACA,QAAA,aAAa,EAAC,MADd;AAEA,QAAA,WAAW,EAAE,KAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAGKE,IAAI,CAAC2B,QAAL,CAAcgB,MAAd,IAAuB,CAAvB,GAA0B,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAIb,MAAM,CAACU,UAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAA1B,GACG,oBAAC,QAAD;AAAW,QAAA,IAAI,EAAExC,IAAI,CAAC2B,QAAtB;AACA,QAAA,YAAY,EAAG,sBAAC3B,IAAD;AAAA,iBAASA,IAAI,CAACuB,eAAL,CAAqB4B,QAArB,EAAT;AAAA,SADf;AAEA,QAAA,UAAU,EAAE;AAAA,cAAElD,IAAF,QAAEA,IAAF;AAAA,iBAAW,oBAAC,IAAD;AAAM,YAAA,KAAK,EAAI6B,MAAM,CAACU,UAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAoCvC,IAAI,CAACqB,OAAzC,iBAA6DrB,IAAI,CAACoB,KAAlE,MAAX;AAAA,SAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJR,EASI,oBAAC,SAAD;AAAW,QAAA,KAAK,EAAES,MAAM,CAACsB,YAAzB;AACA,QAAA,YAAY,EAAC,SADb;AAEA,QAAA,WAAW,EAAC,uBAFZ;AAGA,QAAA,YAAY,EAAE,sBAAAC,IAAI;AAAA,iBAAI,MAAI,CAAC/C,QAAL,CAAc;AAACT,YAAAA,UAAU,EAACwD;AAAZ,WAAd,CAAJ;AAAA,SAHlB;AAIA,QAAA,KAAK,EAAE,KAAK1D,KAAL,CAAWE,UAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QATJ,EAiBA,oBAAC,gBAAD;AAAkB,QAAA,KAAK,EAAEiC,MAAM,CAACkB,SAAhC;AAA2C,QAAA,OAAO,EAAE;AAAA,iBAAK,MAAI,CAACnD,UAAL,EAAL;AAAA,SAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEiC,MAAM,CAACT,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,CAjBA,CADF,GAsBE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAvDZ,CADF;AAmEG;;;;EAjLehC,S;;AAoLpB,IAAMyC,MAAM,GAAGwB,UAAU,CAACC,MAAX,CAAkB;AAC/BxB,EAAAA,UAAU,EAAE;AACVyB,IAAAA,OAAO,EAAC,MADE;AAEVC,IAAAA,UAAU,EAAC,QAFD;AAGVC,IAAAA,WAAW,EAAE,SAHH;AAIVC,IAAAA,YAAY,EAAE,CAJJ;AAKVC,IAAAA,WAAW,EAAE,CALH;AAMVC,IAAAA,MAAM,EAAE,EANE;AAOVC,IAAAA,OAAO,EAAE,EAPC;AAQVC,IAAAA,YAAY,EAAE;AARJ,GADmB;AAY/BvB,EAAAA,UAAU,EAAE;AACVsB,IAAAA,OAAO,EAAE,CADC;AAEV7B,IAAAA,QAAQ,EAAE;AAFA,GAZmB;AAkB/BW,EAAAA,QAAQ,EAAE;AACJoB,IAAAA,eAAe,EAAE,CADb;AAEJzB,IAAAA,KAAK,EAAC,KAFF;AAGJ0B,IAAAA,eAAe,EAAC,kBAHZ;AAIJN,IAAAA,YAAY,EAAC,EAJT;AAKJE,IAAAA,MAAM,EAAC;AALH,GAlBqB;AAyB/BX,EAAAA,SAAS,EAAE;AACTQ,IAAAA,WAAW,EAAC,kBADH;AAETQ,IAAAA,SAAS,EAAE,QAFF;AAGTT,IAAAA,UAAU,EAAE,QAHH;AAITK,IAAAA,OAAO,EAAC;AAJC,GAzBoB;AAgC/BV,EAAAA,YAAY,EAAE;AACVN,IAAAA,KAAK,EAAC,WADI;AAEVa,IAAAA,YAAY,EAAC;AAFH;AAhCiB,CAAlB,CAAf;AAuCA,eAAelE,KAAf","sourcesContent":["import React,{Component} from 'react';\nimport { StyleSheet, Text, View, TouchableOpacity, TextInput, Modal, FlatList, Image} from 'react-native';\nimport { db, auth } from '../firebase/config';\nimport firebase from 'firebase';\nimport \"firebase/firestore\"\n\n\nclass Fotos extends Component{\n    constructor(props){\n      super(props)\n      this.state={\n      likeado: false,\n      comentario: \"\",\n      modal: false,\n      textomodal: \"Ver comentarios\",\n      }\n    }\n    componentDidMount(){\n        if (this.props.data.item.data.likes.includes(auth.currentUser.email)) {\n            this.setState({\n                likeado:true\n            })\n            \n        } \n         \n     }\n\nlike(id){ //el id llega de abajo, del \"boton\"\n    if (this.state.likeado == false) {\n        var agregarLike = db.collection(\"posts\").doc(id);\n        // si likeado = false osea no esta likeado loq ue hace es agregar un like\n        \n\n        return agregarLike.update({\n            likes : firebase.firestore.FieldValue.arrayUnion(auth.currentUser.email)\n         // estamos haciendo referencia al posteo y actualizandolo, \n         //le actualizamos el array likes que estaba vasio \n         // SI O SI hayq ue poner todo ese codigo firebase.fire......\n         //filedvalue= hace referencia a los likes\n         // arrayunion= hace referencia a agregar cosas\n        })\n        .then(() => {\n            this.setState({\n            \n                likeado: true\n            })\n        })\n        .catch((error) => {\n            console.error(\"Error updating document: \", error);\n        }); \n                  \n    }\n    else{\n        var quitarLike = db.collection(\"posts\").doc(id);\n\n        return quitarLike.update({\n            likes : firebase.firestore.FieldValue.arrayRemove(auth.currentUser.email)\n        })\n        // el arrayRemove va a buscar el mail del usuario y le va a sacar el like \n        .then(() => {\n            this.setState({\n\n                likeado: false\n            })\n        })\n        .catch((error) =>{\n            console.error(\"Error updating document: \", error);\n        }); \n\n    }\n}\n\ncomentario(){\n    let comentario= {texto: this.state.comentario,\n                            usuario: auth.currentUser.email,\n                            fechaDeCreacion: Date.now()}\n    let agregarComentario = db.collection(\"posts\").doc(`${this.props.data.item.id}`);\n\n    return agregarComentario.update({\n        comments : firebase.firestore.FieldValue.arrayUnion(comentario)\n    })\n    .then(() => {\n        console.log(\"comentario exitoso\");\n    })\n    .catch((error) => {\n        console.error(\"Error updating document: \", error);\n    }); \n    \n}\n\nmodal(){\n    if (this.state.modal) {\n        this.setState({\n            modal: false,\n            textomodal: \"Ver Comentarios\"\n        })   \n    }\n    else{\n        this.setState({\n            modal: true,\n            textomodal: \"Ocultar Comentarios\"\n        })  \n    }\n}\n\nborrarPosteo(){\n\n    db.collection('posts').doc(this.props.data.item.id).delete()\n    .then(()=>{\n      console.log(this.props.data.item.id)\n    })\n  }\n\n\n    render(){\n        console.log(this.props.data.item.data)\n        let {data} = this.props.data.item\n  return (\n    <View style={styles.contenedor}>\n      \n      <Text style = {{paddingBottom:10,fontSize:20,fontWeight:'bold'}}>{data.user}</Text>\n      <Image source={{uri:data.image}} style={{height:200, width:200}}/>\n      <Text style = {styles.dataposteo}>Titulo: {data.title}</Text>\n      <Text>Contenido: {data.description}</Text>\n      <Text>likes:{data.likes.length}</Text>\n      <Text>Comentarios:{data.comments.length}</Text>\n\n      <TouchableOpacity style = {styles.likeador} onPress={()=>this.like(this.props.data.item.id)}>\n          \n          {this.state.likeado?<Text style={{color:'white',fontWeight:'bold',textAlign:'center'}}>Dislike</Text>:<Text style={{color:'white',fontWeight:'bold',textAlign:'center'}}>Like</Text>}\n                    \n                </TouchableOpacity>\n\n                \n\n                \n            <TouchableOpacity style={styles.touchable} onPress={()=> this.modal()}> \n                <Text style={styles.texto}>{this.state.textomodal}</Text>\n            </TouchableOpacity>\n\n            {this.props.borrarPosteo?\n\n            <TouchableOpacity style={styles.likeador} onPress={()=> this.borrarPosteo()}> \n            <Text style={styles.texto}> Delete Post</Text>\n             </TouchableOpacity>\n\n             : null\n            \n           }\n            \n\n            { this.state.modal?\n                <Modal style = {styles.modalgede}visible={this.state.modal}\n                animationType=\"fade\"\n                transparent={false}>\n                    {data.comments.length== 0? <Text style = {styles.dataposteo}>\"no hay comentarios, haz uno!\"</Text>:\n                        <FlatList  data={data.comments}\n                        keyExtractor= {(data)=> data.fechaDeCreacion.toString()}\n                        renderItem={({item})=> <Text style = {styles.dataposteo}> {item.usuario} escribio: {item.texto} </Text>}  /> \n                        \n                    }\n                    <TextInput style={styles.ingresoTexto}\n                    keyboardType=\"default\"\n                    placeholder=\"Escriba un comentario\"\n                    onChangeText={text => this.setState({comentario:text})}\n                    value={this.state.comentario}\n\n\n                />\n                <TouchableOpacity style={styles.touchable} onPress={()=> this.comentario()}> \n                <Text style={styles.texto}>Comentar</Text>\n             </TouchableOpacity>\n                </Modal>:\n                <Text></Text>\n            }\n\n                \n\n\n      \n\n      \n    </View>\n  );\n    }\n}\n\nconst styles = StyleSheet.create({\n  contenedor: {\n    display:'flex',\n    alignItems:'center',\n    borderColor: '#d8d8d8',\n    borderRadius: 5,\n    borderWidth: 2,\n    margin: 10,\n    padding: 15,\n    shadowRadius: 10,\n  },\n\n  dataposteo: {\n    padding: 3,\n    fontSize: 13,\n  },\n\n\n  likeador: {\n        paddingVertical: 5,\n        width:'25%',\n        backgroundColor:'rgb(58, 58, 211)',\n        borderRadius:15,\n        margin:10,\n  },\n  modalgede: {\n    borderColor:'rgb(58, 58, 211)',\n    alignSelf: 'center',\n    alignItems: 'center',\n    padding:10,\n  },\n\n  ingresoTexto: {\n      color:'lightGray',\n      borderRadius:15,\n\n  }\n});\n\nexport default Fotos\n"]},"metadata":{},"sourceType":"module"}